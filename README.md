# 📍 交互式事件地图

基于Vue 3和Leaflet开发的交互式地图应用，可以点击地图任意位置添加和管理事件记录。

## ✨ 功能特性

- 🗺️ **交互式地图**：基于OpenStreetMap的响应式地图
- 📍 **点击添加事件**：点击地图任意位置即可添加新事件
- 🎯 **实时定位**：一键获取并定位到用户当前位置
- 📝 **事件信息管理**：支持标题、描述、类型等信息记录
- 🎯 **事件类型分类**：事故、活动、新闻、其他等类型
- ☁️ **云同步**：集成Supabase数据库，支持多设备实时同步
- 👥 **用户认证**：支持用户注册、登录和个人数据管理
- 💾 **双重存储**：支持云端同步和本地存储两种模式
- 🗑️ **事件删除**：支持删除不需要的事件
- 📋 **事件列表**：侧边栏显示所有事件列表
- 🔍 **快速定位**：点击列表项快速定位到地图位置
- 📱 **响应式设计**：支持桌面和移动设备

## 🚀 快速开始

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:3000 即可使用应用。

### 构建生产版本

```bash
npm run build
```

### ☁️ 云数据库配置

首次使用云同步功能需要配置Supabase：

1. **创建Supabase项目**：
   - 访问 [Supabase官网](https://supabase.com)
   - 创建新项目并获取API密钥

2. **配置应用**：
   - 在 `src/supabase.js` 中填入API密钥
   - 运行 `database-setup.sql` 创建数据库表

3. **详细配置**：参考 [云数据库配置指南](./CLOUD_SETUP.md)

## 📖 使用说明

1. **添加事件**：点击地图上的任意位置，会弹出事件信息输入框
2. **实时定位**：点击右上角"我的位置"按钮获取并定位到当前位置
3. **云同步登录**：点击左上角"登录"按钮注册/登录以启用云同步
4. **切换存储模式**：点击"云同步"按钮切换云端/本地存储模式
5. **填写信息**：输入事件标题、描述和选择事件类型
6. **查看事件**：点击右侧"显示列表"按钮查看所有事件
7. **定位事件**：点击列表中的事件项，地图会自动定位到该位置
8. **删除事件**：在事件列表中点击删除按钮删除事件
9. **查看详情**：点击地图上的标记查看事件详情
10. **实时同步**：登录后在云同步模式下，其他用户的事件会实时显示

## 🛠️ 技术栈

- **Vue 3**：渐进式JavaScript框架
- **Vite**：快速的前端构建工具
- **Leaflet**：开源的JavaScript地图库
- **OpenStreetMap**：开放的地图数据源
- **Supabase**：开源的Firebase替代方案，提供数据库和认证服务
- **PostgreSQL**：强大的关系型数据库
- **Real-time Sync**：实时数据同步技术

## 📁 项目结构

```
├── public/
├── src/
│   ├── components/
│   │   └── InteractiveMap.vue    # 主要地图组件
│   ├── App.vue                   # 根组件
│   └── main.js                   # 入口文件
├── index.html                    # HTML模板
├── package.json                  # 项目配置
├── vite.config.js               # Vite配置
└── README.md                     # 项目说明
```

## 🎨 自定义配置

### 修改默认地图位置

在 `src/components/InteractiveMap.vue` 中修改默认地图中心点：

```javascript
this.map = L.map('map').setView([39.9042, 116.4074], 10)
```

### 修改事件类型

在组件中的 `getEventTypeName` 方法和模板中的选项中添加新的事件类型。

## 📱 移动端适配

应用已针对移动端进行优化，支持触摸操作和响应式布局。

## 💾 数据存储

事件数据使用浏览器的 `localStorage` 进行本地存储，清除浏览器数据会导致事件记录丢失。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

MIT License